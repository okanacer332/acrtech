---
title: "إدارة المجمعات السكنية ACR: هندسة تخطيط موارد المؤسسات الهجينة بين سطح المكتب والسحابة"
category: "Desktop & Cloud Architecture"
description: "نظام إدارة تم تطويره باستخدام Electron.js و React و Spring Boot للإدارة الجماعية للممتلكات، ويتميز بقدرات الخصم غير المتزامن وإعداد التقارير المالية. تفاصيل الوصول أدناه."
date: "2025-12-14"
image: "/portfolio/site.png"
author: "مهندس النظام"
---

# الهندسة الهجينة في إدارة الهياكل والمرافق الجماعية: نظام إدارة المجمعات السكنية ACR

**المشروع:** نظام إدارة المجمعات السكنية ACR

**عنوان الوصول:** [app-siteyonetim.acrtech.com.tr](https://app-siteyonetim.acrtech.com.tr)

**نوع الوثيقة:** تحليل الهندسة الفنية ومراجعة النظام



## ملخص (Abstract)

تم تصميم نظام إدارة المجمعات السكنية ACR لإدارة العمليات المالية والإدارية لمساحات المعيشة الجماعية مثل الشقق والمجمعات والمراكز التجارية.

يجمع المشروع بين سلاسة تطبيق سطح المكتب (**Electron.js & React**) من حيث تجربة المستخدم وبنية المؤسسة الخلفية (**Spring Boot & MongoDB**) لأمن البيانات وسلامة المعاملات. يميز نفسه عن البرامج القياسية على وجه التحديد بمبادئ المحاسبة "Storno" (القيد العكسي)، وخدمات الخصم الجماعي غير المتزامن، ومحرك تقارير ديناميكي قائم على NoSQL.

## 1. المقدمة ومجال المشكلة

تتم إدارة المجمعات السكنية عمومًا بملفات Excel أو برامج سطح المكتب من الجيل القديم. يؤدي هذا الوضع إلى المشاكل التالية:

1.  **تضارب البيانات:** عند حذف دين شقة، يصبح مصير المال في الصندوق غير واضح (نقص مسار التدقيق).
2.  **مشاكل الأداء:** في مجمع يضم مئات الشقق، يمكن أن تؤدي إضافة ديون المستحقات للجميع بنقرة واحدة إلى قفل الأنظمة.
3.  **نقص المرونة:** بصرف النظر عن النفقات الثابتة، لا يمكن عكس النفقات غير العادية مثل "إصلاح السقف" فورًا على أصحاب الشقق.

تحل إدارة المجمعات السكنية ACR هذه المشاكل بنهج حديث "مدفوع بالأحداث" و "غير متزامن".

## 2. هندسة النظام ومكدس التكنولوجيا

يقع المشروع في بنية **عميل-خادم** ويستخدم هيكلاً هجينًا من جانب العميل.



### 2.1. الواجهة الخلفية (طبقة الخادم)

دماغ النظام هو خدمة RESTful API التي تعمل على **Spring Boot 3.5**.
* **قاعدة البيانات:** **MongoDB**. في إدارة الموقع، يمكن أن يتغير مخطط البيانات (خصائص التجهيزات، أنواع المعاملات) بمرور الوقت. يوفر هيكل MongoDB الخالي من المخطط (schemaless) هذه المرونة.
* **سلامة البيانات:** على الرغم من استخدام NoSQL، فإن تفرد مجموعة "معرف الكتلة + رقم الباب" مضمون على مستوى قاعدة البيانات باستخدام `@CompoundIndex` في نموذج `Flat`.
* **هندسة غير متزامنة:** يتم تنفيذ العمليات طويلة الأمد (على سبيل المثال، تراكم الديون لـ 500 شقة) في الخلفية دون حظر الخيط الرئيسي باستخدام التعليق التوضيحي `@Async` وهيكل `TaskExecutor` الخاص بـ Spring.

### 2.2. الواجهة الأمامية وسطح المكتب (طبقة العميل)

تم تطوير واجهة المستخدم باستخدام **React** و **Material UI (MUI)**، وتم تجميعها باستخدام **Vite**، وتعبئتها باستخدام **Electron**.
* **تكامل Electron:** تعمل الواجهة المطورة بتقنيات الويب (HTML/CSS/JS) مثل تطبيق سطح مكتب أصلي (Windows/macOS/Linux) بفضل Electron.
* **هندسة CRUD Hook:** يدير الخطاف المخصص `useCrudApi` المطور على جانب الواجهة الأمامية جميع طلبات API، ومعالجة الأخطاء، وحالات التحميل من نقطة مركزية.

## 3. الميزات الفنية والحلول الهامة

تطبيقات "أفضل الممارسات" البارزة في أكواد المصدر للمشروع:

### 3.1. الخصم الجماعي غير المتزامن (Async Processing)
إضافة ديون المستحقات لمئات الشقق في نفس الوقت عملية مكلفة.
* **المشكلة:** تجميد المتصفح عندما ينقر المستخدم على زر "الخصم".
* **الحل:** يتم استخدام `@Async` في فئة `TopluBorclandirmaService.java`. بينما يتم إرجاع استجابة "202 Accepted" للمستخدم بمجرد استلام الطلب، تستمر العملية في الخلفية في خيط منفصل.



### 3.2. السلامة المالية ومنطق "Storno" (مسار التدقيق)
لا ينبغي أبدًا حذف السجل المحاسبي ماديًا.
* **الآلية:** في طريقة الإلغاء داخل `FinansalIslemController.java`، لا يتم حذف المعاملة الخاطئة (يتم تمييزها `isCancelled=true`).
* **سجل عكسي:** يتم طرح "سجل تصحيح" تلقائيًا في النظام في الاتجاه المعاكس (مصروفات إذا كان دخلاً، دخل إذا كان مصروفات) وبنفس المبلغ. بهذه الطريقة، يتم تصحيح رصيد الصندوق رياضيًا، لكن سجل المعاملات لا يضيع.



### 3.3. إعداد التقارير باستخدام MongoDB Aggregation
الحسابات المالية التي تتم باستخدام الحلقات القياسية (for-loop) بطيئة.
* **الحل:** يتم استخدام `Aggregation Pipeline` داخل `AidatKaydiRepository`.
* **التقنية:** بدلاً من سحب البيانات إلى جانب Java ومعالجتها، يتم إجراء الحساب بواسطة محرك قاعدة البيانات (MongoDB) (`$group`, `$sum`, `$cond`). هذا يزيد من سرعة إعداد التقارير بمقدار 10x-100x.

### 3.4. عكس النفقات غير العادية
واحدة من "أذكى" ميزات النظام.
* يمكن تقسيم "مصروف" تم إدخاله في حركات الصندوق (على سبيل المثال، صيانة المصعد) بالتساوي بين جميع الشقق وعكسه كـ "دين" بنقرة واحدة إذا رغبت في ذلك (`BorclandirmaController`).

## 4. الوحدات والوظائف



### 4.1. لوحة القيادة ونظرة عامة
* يتم تصور رصيد الدخل والمصروفات لآخر 6 أشهر مع تكامل **Chart.js**.
* يتم تقديم رصيد الصندوق الفوري ومعدلات الإشغال في بطاقات ملخص.

### 4.2. إدارة الشقق والكتل
* يتم تتبع الشقق تحت حالات "مالك العقار" أو "مستأجر" أو "فارغ".
* معلومات الاتصال وتاريخ المقيمين مسجلة.

### 4.3. إدارة التجهيزات
* يتم تتبع الأصول المادية للموقع (جزازة العشب، المولد، إلخ) جنبًا إلى جنب مع حالتها (قيد الاستخدام، مكسور، في الخدمة).

### 4.4. تتبع الصندوق والحساب الجاري
* يتم تصنيف بنود الدخل والمصروفات (كهرباء، ماء، موظفين).
* يتم تتبع الإيصالات أو الفواتير في بيئة رقمية.

## 5. عرض حي والوصول

بيئة العرض الحي التي تحاكي تجربة سطح المكتب للنظام عبر متصفح الويب نشطة.

**عنوان العرض:** [https://app-siteyonetim.acrtech.com.tr](https://app-siteyonetim.acrtech.com.tr)
*(ملاحظة: قد يتم إعادة تعيين التغييرات التي تم إجراؤها في بيئة العرض بشكل دوري.)*

## 6. الخاتمة

نظام إدارة المجمعات السكنية ACR ليس مجرد برنامج بسيط يجمع المستحقات؛ إنه حل ERP حديث يطبق **معايير المحاسبة (Storno)** في الخلفية، ويحسن أداء قاعدة البيانات باستخدام **Aggregation**، وينقل تجربة المستخدم إلى سطح المكتب باستخدام **Electron**.