---
title: "Управление недвижимостью ACR: Гибридная архитектура настольной и облачной ERP"
category: "Desktop & Cloud Architecture"
description: "Система управления, разработанная на Electron.js, React и Spring Boot для коллективного управления недвижимостью, с возможностями асинхронного начисления долгов и финансовой отчетности. Данные для доступа ниже."
date: "2025-12-14"
image: "/portfolio/site.png"
author: "Системный Архитектор"
---

# Гибридная архитектура в управлении коллективной недвижимостью и объектами: Система управления недвижимостью ACR

**Проект:** Система управления недвижимостью ACR

**Адрес доступа:** [app-siteyonetim.acrtech.com.tr](https://app-siteyonetim.acrtech.com.tr)

**Тип документа:** Анализ технической архитектуры и обзор системы



## Аннотация (Abstract)

Система управления недвижимостью ACR предназначена для управления финансовыми и административными процессами коллективных жилых помещений, таких как квартиры, комплексы и бизнес-центры.

Проект сочетает в себе плавность настольного приложения (**Electron.js & React**) с точки зрения пользовательского опыта и корпоративную архитектуру бэкенда (**Spring Boot & MongoDB**) для безопасности данных и целостности транзакций. Она отличается от стандартного программного обеспечения, в частности, принципами бухгалтерского учета «Сторно», сервисами асинхронного массового начисления долгов и механизмом динамической отчетности на основе NoSQL.

## 1. Введение и Проблемное пространство

Управление жилыми комплексами, как правило, осуществляется с помощью файлов Excel или настольного программного обеспечения старого поколения. Эта ситуация приводит к следующим проблемам:

1.  **Несогласованность данных:** Когда долг квартиры удаляется, судьба денег в кассе становится неясной (отсутствие аудиторского следа).
2.  **Проблемы с производительностью:** В комплексе с сотнями квартир добавление долга по взносам всем одним кликом может заблокировать системы.
3.  **Недостаток гибкости:** Помимо фиксированных расходов, чрезвычайные расходы, такие как «Ремонт крыши», не могут быть мгновенно отражены для владельцев квартир.

Управление недвижимостью ACR решает эти проблемы с помощью современного подхода «Event-Driven» (управляемого событиями) и «Асинхронного» подхода.

## 2. Системная архитектура и Технологический стек

Проект имеет архитектуру **Клиент-Сервер** и использует гибридную структуру на стороне клиента.



### 2.1. Бэкенд (Серверный слой)

Мозгом системы является сервис RESTful API, работающий на **Spring Boot 3.5**.
* **База данных:** **MongoDB**. В управлении недвижимостью схема данных (свойства инвентаря, типы транзакций) может меняться со временем. Бессхемная (schemaless) структура MongoDB обеспечивает эту гибкость.
* **Целостность данных:** Несмотря на использование NoSQL, уникальность комбинации «ID блока + Номер двери» гарантируется на уровне базы данных с использованием `@CompoundIndex` в модели `Flat`.
* **Асинхронная архитектура:** Длительные процессы (например, начисление долга 500 квартирам) выполняются в фоновом режиме без блокировки основного потока с использованием аннотации `@Async` и структуры Spring `TaskExecutor`.

### 2.2. Фронтенд и Десктоп (Клиентский слой)

Пользовательский интерфейс разработан с использованием **React** и **Material UI (MUI)**, скомпилирован с **Vite** и упакован с **Electron**.
* **Интеграция с Electron:** Интерфейс, разработанный с использованием веб-технологий (HTML/CSS/JS), работает как нативное настольное приложение (Windows/macOS/Linux) благодаря Electron.
* **Архитектура CRUD Hook:** Кастомный хук `useCrudApi`, разработанный на стороне фронтенда, управляет всеми запросами API, обработкой ошибок и состояниями загрузки из центральной точки.

## 3. Критические технические особенности и решения

Практики «Best Practice», выделяющиеся в исходных кодах проекта:

### 3.1. Асинхронное массовое начисление (Async Processing)
Добавление долга по взносам сотням квартир одновременно — дорогостоящая операция.
* **Проблема:** Зависание браузера, когда пользователь нажимает кнопку «Начислить долг».
* **Решение:** В классе `TopluBorclandirmaService.java` используется `@Async`. В то время как пользователю возвращается ответ «202 Accepted», как только запрос получен, процесс продолжается в фоновом режиме в отдельном потоке.



### 3.2. Финансовая целостность и логика «Сторно» (Audit Trail)
Бухгалтерская запись никогда не должна быть удалена физически.
* **Механизм:** В методе отмены внутри `FinansalIslemController.java` ошибочная транзакция не удаляется (она помечается как `isCancelled=true`).
* **Обратная запись:** В систему автоматически вносится «Корректирующая запись» в обратном направлении (Расход, если Доход; Доход, если Расход) и на ту же сумму. Таким образом, баланс кассы исправляется математически, но история транзакций не теряется.



### 3.3. Отчетность с помощью MongoDB Aggregation
Финансовые расчеты, выполняемые с помощью стандартных циклов (for-loop), медленны.
* **Решение:** Внутри `AidatKaydiRepository` используется `Aggregation Pipeline`.
* **Техника:** Вместо того чтобы вытягивать данные на сторону Java и обрабатывать их, расчет выполняется движком базы данных (MongoDB) (`$group`, `$sum`, `$cond`). Это увеличивает скорость отчетности в 10-100 раз.

### 3.4. Отражение чрезвычайных расходов
Одна из самых «умных» функций системы.
* «Расход», введенный в движениях кассы (например, Обслуживание лифта), при желании может быть поровну разделен между всеми квартирами и отражен как «Долг» одним кликом (`BorclandirmaController`).

## 4. Модули и Функциональность



### 4.1. Дашборд и Обзор
* Баланс Доходов и Расходов за последние 6 месяцев визуализируется с интеграцией **Chart.js**.
* Мгновенный баланс кассы и уровень заполняемости представлены в сводных карточках.

### 4.2. Управление квартирами и блоками
* Квартиры отслеживаются под статусами «Собственник», «Арендатор» или «Пусто».
* Контактная информация и история проживающих находятся под записью.

### 4.3. Управление инвентарем
* Физические активы комплекса (Газонокосилка, Генератор и т.д.) отслеживаются вместе с их статусом (В использовании, Сломано, В ремонте).

### 4.4. Касса и Отслеживание текущих счетов
* Статьи доходов и расходов категоризируются (Электричество, Вода, Персонал).
* Отслеживание квитанций или счетов-фактур осуществляется в цифровой среде.

## 5. Живая демонстрация и Доступ

Среда живой демонстрации, имитирующая настольный опыт системы через веб-браузер, активна.

**Адрес демо:** [https://app-siteyonetim.acrtech.com.tr](https://app-siteyonetim.acrtech.com.tr)
*(Примечание: Изменения, внесенные в демо-среде, могут периодически сбрасываться.)*

## 6. Заключение

Система управления недвижимостью ACR — это не просто простое программное обеспечение, которое собирает взносы; это современное решение ERP, которое применяет **бухгалтерские стандарты (Сторно)** в фоновом режиме, оптимизирует производительность базы данных с помощью **Aggregation** и переносит пользовательский опыт на рабочий стол с помощью **Electron**.